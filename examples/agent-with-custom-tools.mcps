// Example: Agent with Custom User-Defined Tools
//
// This example demonstrates how to create custom tools and use them with agents.
// The agent can intelligently choose which tools to use based on the task.
//
// Requirements:
//   - Ollama running locally with gpt-oss:20b model installed

// Configure a local AI model using Ollama
model gpt {
  provider: "openai",
  apiKey: "ollama",
  baseURL: "http://localhost:11434/v1",
  model: "gpt-oss:20b",
  temperature: 0.5
}

// Define custom tools that the agent can use
tool add(a, b) {
  print("Tool 'add' called with: a=" + a + ", b=" + b)
  return a + b
}

tool multiply(a, b) {
  print("Tool 'multiply' called with: a=" + a + ", b=" + b)
  return a * b
}

tool square(x) {
  print("Tool 'square' called with: x=" + x)
  return x * x
}

// Create an agent with access to our custom math tools
agent MathAssistant {
  model: gpt,
  systemPrompt: "You are a helpful math assistant. You have a few tools to help you solve math problems.",
  tools: [add, multiply, square]
}

// Ask the agent to solve problems using the tools
print("=== Problem 1: Simple Addition ===")
"What is 15 plus 27?" | MathAssistant

print("\n=== Problem 2: Multiplication ===")
"Calculate 8 times 12" | MathAssistant

print("\n=== Problem 3: Multi-step Calculation ===")
"What is 5 squared plus 10?" | MathAssistant
