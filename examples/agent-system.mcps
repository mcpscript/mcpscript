// Example: Simple Agent System Demonstration
// This demonstrates how to use agents in MCP Script
//
// To run this example:
//   mcps run examples/agent-system.mcps
//
// Requirements:
//   - Ollama running locally with gpt-oss:20b model installed

// Configure a local AI model using Ollama
model localLlama {
  provider: "ollama",
  model: "gpt-oss:20b",
  temperature: 0.7
}

// Set up an MCP server for file operations
mcp filesystem {
  command: "npx",
  args: ["-y", "@modelcontextprotocol/server-filesystem@latest", "/tmp"],
  stderr: "ignore"
}

// Declare an agent with access to filesystem tools
agent FileAssistant {
  model: localLlama,
  systemPrompt: "You are a helpful file assistant. Help users work with files efficiently.",
  tools: [filesystem]
}

log.info("Agent system initialized")

// Create a test file
filesystem.write_file("/tmp/example.txt", "Hello from MCP Script! The answer is 42.")
log.info("Created test file")

// Use the agent to read and analyze the file
conv = "Read the file /tmp/example.txt and tell me what number is mentioned in it" -> FileAssistant
result = conv.result()

log.info("Agent response", { response: result })
print("Agent found:", result)
